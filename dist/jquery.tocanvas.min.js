/*
 *  jquery-tocanvas - v0.1.0
 *  A jquery plugin to overlay any img with a canvas to add effects to it
 *  http://seedoubleyou.nl
 *
 *  Made by Cees-Willem Hofstede
 *  Under MIT License
 */
!function(a){"use strict";function b(b,e){this.element=b,this.$element=a(this.element),this.canvas=a("<canvas>"),this.$canvas=a(this.canvas),this.context,this.wrapper=a("<div>"),this.$wrapper=a(this.wrapper),this.imgData,this.pixels,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="toCanvas",d={opacity:1,hoverOpacity:1,zIndex:10};a.extend(b.prototype,{init:function(){var b=this;b.w=b.$element.width(),b.h=b.$element.height(),b.$wrapper.addClass("tc_wrapper").css({position:"relative",width:b.w,height:b.h}),b.$canvas.addClass("tc_canvas").css({position:"absolute",top:0,left:0,zIndex:b.settings.zIndex,opacity:b.settings.opacity}).hover(function(){a(this).css({opacity:b.settings.hoverOpacity})},function(){a(this).css({opacity:b.settings.opacity})}).attr({width:b.w,height:b.h}),b.$element.addClass("tc_image").wrap(b.$wrapper).before(b.$canvas),b.context=this.canvas.get(0).getContext("2d");var c=new Image;c.onload=function(){b.context.drawImage(c,0,0,b.w,b.h),b.imgd=b.context.getImageData(0,0,b.w,b.h),b.pixels=b.imgd.data,b.sepia(),b.context.putImageData(b.imgd,0,0)},c.src=this.$element.attr("src")},grayscale:function(){for(var a=0,b=this.pixels.length;b>a;a+=4){var c=.3*this.pixels[a]+.59*this.pixels[a+1]+.11*this.pixels[a+2];this.pixels[a]=c,this.pixels[a+1]=c,this.pixels[a+2]=c}},sepia:function(){for(var a=0;a<this.pixels.length;a+=4){var b=this.pixels[a],c=this.pixels[a+1],d=this.pixels[a+2];this.pixels[a]=.393*b+.769*c+.189*d,this.pixels[a+1]=.349*b+.686*c+.168*d,this.pixels[a+2]=.272*b+.534*c+.131*d}}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);